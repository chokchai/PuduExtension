// Generated by CoffeeScript 1.6.3
(function() {
  var IMG_DIR, KEY_DIR, STICKERS_DIR, TAB_DIR, file, filterImg, filterKey, filterTab, fn, fs, rmrfSync, sdir, _i, _j, _len, _len1, _ref, _ref1;

  STICKERS_DIR = './stickers/';

  TAB_DIR = STICKERS_DIR + 'stickers-tab/';

  IMG_DIR = STICKERS_DIR + 'stickers-img/';

  KEY_DIR = STICKERS_DIR + 'stickers-key/';

  filterTab = function(filename) {
    return filename.indexOf('tab_on') > -1;
  };

  filterKey = function(filename) {
    return filename.indexOf('key') > -1;
  };

  filterImg = function(filename) {
    return filename.indexOf('.png') > -1 && !filterKey(filename) && filename.indexOf('tab') === -1;
  };

  rmrfSync = function(path) {
    var files;
    files = [];
    if (fs.existsSync(path)) {
      files = fs.readdirSync(path);
      files.forEach(function(file) {
        var curPath;
        curPath = path + "/" + file;
        if (fs.statSync(curPath).isDirectory()) {
          return rmrfSync(curPath);
        } else {
          return fs.unlinkSync(curPath);
        }
      });
      return fs.rmdirSync(path + "/");
    }
  };

  fs = require('fs');

  console.log('INIT_DIR');

  rmrfSync(TAB_DIR);

  rmrfSync(IMG_DIR);

  rmrfSync(KEY_DIR);

  fs.mkdirSync(TAB_DIR);

  fs.mkdirSync(IMG_DIR);

  fs.mkdirSync(KEY_DIR);

  _ref = fs.readdirSync(STICKERS_DIR);
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    sdir = _ref[_i];
    fs.mkdirSync(TAB_DIR + sdir);
    fs.mkdirSync(IMG_DIR + sdir);
    fs.mkdirSync(KEY_DIR + sdir);
    _ref1 = fs.readdirSync(STICKERS_DIR + sdir);
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      fn = _ref1[_j];
      file = fs.readFileSync(STICKERS_DIR + sdir + '/' + fn);
      if (filterTab(fn)) {
        fs.writeFileSync(TAB_DIR + sdir + '/' + fn, file);
      }
      if (filterKey(fn)) {
        fs.writeFileSync(KEY_DIR + sdir + '/' + fn, file);
      }
      if (filterImg(fn)) {
        fs.writeFileSync(IMG_DIR + sdir + '/' + fn, file);
      }
      console.log('SAVED ' + STICKERS_DIR + sdir + '/' + fn);
    }
  }

  console.log('DONE!');

}).call(this);

/*
//@ sourceMappingURL=stickers-classification-nodejs.map
*/
